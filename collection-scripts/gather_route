#!/usr/bin/env bash

# Route Data Collection Script
# Collects OpenShift Route information for RHDH deployments
# Note: Routes are OpenShift-specific resources; this will fail gracefully on vanilla Kubernetes

set -euo pipefail

# Get script directory for calling other scripts
DIR_NAME=$( cd -- "$( dirname -- "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )
source "${DIR_NAME}/common.sh"

log_info "Starting OCP Route data collection..."

namespace_args=$(get_namespace_args)
safe_exec "$KUBECTL_CMD get routes.route.openshift.io $namespace_args" "$BASE_COLLECTION_PATH/all-routes.txt" "All OCP routes"

# TODO Collect more details if needed